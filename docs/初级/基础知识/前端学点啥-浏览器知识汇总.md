# 浏览器知识汇总

## 一,浏览器组成

### 1.浏览器概念

浏览器可以理解为解析来自服务器内容的一个终端，自己本身具有发送和接收数据，解析数据的能力，为了网络世界收发数据的实现，世界 W3C 机构制定了一些基本的关于浏览器的规则，但是各家浏览器为了突出自家卖点，均有一些不同的规则。

### 2.浏览器内核

各家浏览器独特的卖点就是自己的内核，所谓的内核主要由两部分组成，1 部分是渲染引擎，主要用来解析 HTML，XML，绘制 CSS 样式等，2 部分就是解析和运行 JS 的引擎

### 3.浏览器兼容问题处理

根据上述对浏览器的介绍，我们知道浏览器之间的兼容问题必不可少，但是对于用户来讲，是完全不理解这些个家伙为何要这样做的，因此对于开发者来说，我们就是要帮助用户解决这个问题。

兼容性问题主要体现在两个方面

- 各家浏览器对 CSS 的解读
  实际项目中，我们会结合 webpack 等打包工具，对于我们写的 CSS 文件，添加 postcss 支持，postcss 会对每一个不兼容的 CSS 样式，针对各家浏览器添加内核前缀，以达到统一兼容效果

- 各家浏览器对解析 JS 的行为
  实际项目中，结合 babel 和 poslifill，对浏览器的具体 JS 解析功能做统一处理

## 二,浏览器渲染原理

![浏览器渲染原理](https://cdn.nlark.com/yuque/0/2020/png/1500604/1603797939165-3bf54e28-5469-4093-a0e1-e0569cec1305.png?x-oss-process=image%2Fresize%2Cw_663%2Climit_0)

> 当浏览器接收到服务器的 html，css，js 等文件时，会同时根据 HTML 来生成文档模式，根据 CSS 生成 CSS 样式规则表，然后再结合两者生成渲染元素，再根据渲染元素的位置进行布局后，展示出来，这个过程会循环持续，直到所有加载完毕，为了不造成卡顿的错觉，浏览器会分段做这个行为，内容也会一点点展示出来，而不是等到所有布局完成再解析，这会造成阻塞。

### 1.哪些行为会造成浏览器的渲染阻塞，如何避免？

> 浏览器渲染主要就是与 HTML，CSS，JS 相关，那么我们从三个方面下手解决渲染阻塞。

#### HTML

> 浏览器页面的主要展示就是关于 html，但是当 HTML 的层级过多时，浏览器的解析就会变得缓慢，结合实际情况，我们在 VUE 或者 REACT 开发时，可以使用框架提供的空标签，空标签并不会产生新的 DOM 层级

#### CSS

> CSS 的解析并不会阻塞渲染，但是 CSS 操作会引起浏览器的回流和重绘，因此我们应当尽量避免这类高消耗行为

#### JS

> 当浏览器遇到 JS 时，会暂停 HTML 的渲染，直接去下载和运行 JS 文件，执行完毕后，再去渲染被中断的 HTML，因此 JS 会导致浏览器渲染阻塞，实际开发中，结合 webpack 等打包工具，往往将 JS 放在 body 最后解析运行，同时设置 defer 属性，实际上有两种异步加载的方式，async 和 defer，但推荐用 defer，async 会异步下载，无论 HTML 是否解析加载完毕，会立即去执行，多个 async 无法保证执行顺序，defer 也是异步下载，但是 defer 会让 HTML 解析完毕后再去执行，多个 defer 会按照顺序执行

## 三,浏览器同源策略

### 1.什么是同源策略

浏览器为了安全起见，对于协议，域名，端口不同的请求全部视为跨域请求
![zVHn0.png](https://s1.328888.xyz/2022/06/08/zVHn0.png)

### 2.如何解决同源策略导致的跨域问题

实际开发过程中，当我们调用 API 时，肯定会遇到跨域问题，为什么呢，因此我们开发中，前端的域名是自己本机的 IP 地址，后端的 API 是后端同事电脑的 IP 地址，两者触发了同源策略，所以会出现跨域问题，项目上线后，前后端是部署在同一台服务器或者虚拟机上，便不会出现跨域问题.

> react 项目中的跨域问题可以使用 midwarepoxy 来解决，详细解决方案不多说，百度即可。

### 正向代理和反向代理的区别

#### 1.正向代理

VPN 访问就是正向代理，我们无法访问 BBC，需要借助 VPN 服务器访问 BBC 后，我们再去从 VPN 服务器上获取数据

#### 1.反向代理

NGinx 负载均衡就是反向代理，目的是将用户的请求分发到不同的服务器，降低主服务器压力，同时隐藏主服务器 IP

## 四,浏览器事件机制

## 五,浏览器安全

## 六,浏览器垃圾回收
